<!DOCTYPE html>
<html>
<head>
    <title>ç¼“å­˜æ¸…ç†å·¥å…·</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f0f0f0; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; }
        button { padding: 10px 20px; margin: 10px; background: #007cba; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #005a87; }
        .info { background: #e7f3ff; padding: 15px; border-radius: 5px; margin: 10px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”„ ç¼“å­˜æ¸…ç†å·¥å…·</h1>
        
        <div class="info">
            <strong>å½“å‰æ—¶é—´:</strong> <span id="currentTime"></span><br>
            <strong>é¡µé¢URL:</strong> <span id="pageUrl"></span><br>
            <strong>æœ€åä¿®æ”¹:</strong> <span id="lastModified"></span>
        </div>
        
        <h3>æ¸…ç†ç¼“å­˜æ–¹æ³•ï¼š</h3>
        <button onclick="hardRefresh()">å¼ºåˆ¶åˆ·æ–°é¡µé¢</button>
        <button onclick="clearCache()">æ¸…é™¤æœ¬åœ°ç¼“å­˜</button>
        <button onclick="openMainPage()">æ‰“å¼€ä¸»é¡µé¢</button>
        <button onclick="openDebugPage()">æ‰“å¼€è°ƒè¯•é¡µé¢</button>
        
        <h3>æ‰‹åŠ¨æ¸…ç†æ­¥éª¤ï¼š</h3>
        <ol>
            <li><strong>Chrome/Edge:</strong> æŒ‰ Ctrl+Shift+R (Windows) æˆ– Cmd+Shift+R (Mac)</li>
            <li><strong>Firefox:</strong> æŒ‰ Ctrl+F5 (Windows) æˆ– Cmd+Shift+R (Mac)</li>
            <li><strong>Safari:</strong> æŒ‰ Cmd+Option+R</li>
            <li><strong>æˆ–è€…:</strong> æ‰“å¼€å¼€å‘è€…å·¥å…· (F12)ï¼Œå³é”®åˆ·æ–°æŒ‰é’®ï¼Œé€‰æ‹©"æ¸…ç©ºç¼“å­˜å¹¶ç¡¬æ€§é‡æ–°åŠ è½½"</li>
        </ol>
        
        <div id="testResult"></div>
    </div>

    <script>
        function updateInfo() {
            document.getElementById('currentTime').textContent = new Date().toLocaleString();
            document.getElementById('pageUrl').textContent = window.location.href;
            document.getElementById('lastModified').textContent = document.lastModified || 'æœªçŸ¥';
        }
        
        function hardRefresh() {
            window.location.reload(true);
        }
        
        function clearCache() {
            if ('caches' in window) {
                caches.keys().then(names => {
                    names.forEach(name => {
                        caches.delete(name);
                    });
                });
            }
            localStorage.clear();
            sessionStorage.clear();
            alert('ç¼“å­˜å·²æ¸…ç†ï¼Œè¯·åˆ·æ–°é¡µé¢');
        }
        
        function openMainPage() {
            window.open('index.html?t=' + Date.now(), '_blank');
        }
        
        function openDebugPage() {
            window.open('debug.html?t=' + Date.now(), '_blank');
        }
        
        // æµ‹è¯•æ–‡ä»¶æ˜¯å¦æ›´æ–°
        function testFileUpdate() {
            fetch('index.html?t=' + Date.now())
                .then(response => response.text())
                .then(html => {
                    const hasDebugLink = html.includes('debug.html') || html.includes('ğŸ”§');
                    const result = document.getElementById('testResult');
                    if (hasDebugLink) {
                        result.innerHTML = '<div style="color: green; padding: 10px; background: #d4edda; border-radius: 5px; margin-top: 15px;">âœ… æ£€æµ‹åˆ°æ›´æ–°ï¼šæ–‡ä»¶å·²åŒ…å«è°ƒè¯•é“¾æ¥</div>';
                    } else {
                        result.innerHTML = '<div style="color: red; padding: 10px; background: #f8d7da; border-radius: 5px; margin-top: 15px;">âŒ æœªæ£€æµ‹åˆ°æ›´æ–°ï¼šæ–‡ä»¶å¯èƒ½è¿˜æœªæ›´æ–°</div>';
                    }
                })
                .catch(err => {
                    document.getElementById('testResult').innerHTML = '<div style="color: orange; padding: 10px; background: #fff3cd; border-radius: 5px; margin-top: 15px;">âš ï¸ æ£€æµ‹å¤±è´¥ï¼š' + err.message + '</div>';
                });
        }
        
        updateInfo();
        setInterval(updateInfo, 1000);
        
        // é¡µé¢åŠ è½½åè‡ªåŠ¨æµ‹è¯•
        setTimeout(testFileUpdate, 2000);
        
        // æ¯30ç§’è‡ªåŠ¨æµ‹è¯•ä¸€æ¬¡
        setInterval(testFileUpdate, 30000);
    </script>
</body>
</html>